const express=require("express"),app=express(),http=require("http"),server=http.createServer(app),{Server:Server}=require("socket.io"),io=new Server(server),bodyParser=require("body-parser"),mainRoutes=require("./routes/main");app.set("view engine","ejs"),app.use(express.static("public")),app.use(bodyParser.urlencoded({extended:!0})),app.use(bodyParser.json()),io.on("connection",socket=>{console.log(socket.id),socket.on("send-message",msg=>{socket.emit("receive-message",msg),console(msg)})}),app.use(mainRoutes),server.listen(process.env.PORT||3e3,()=>{console.log("It's Alive!")});